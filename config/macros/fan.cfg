[gcode_macro M141]
description: Set the chamber target temperature to trigger exhaust fan
gcode:
    {% set s = params.S|default(0)|float %}
    SET_TEMPERATURE_FAN_TARGET temperature_fan="exhaust_fan" target={s}


[gcode_macro EXHAUST_FAN_ON]
description: Forces the chamber fan to turn on
gcode:
    SET_TEMPERATURE_FAN_TARGET temperature_fan="exhaust_fan" target=10


[gcode_macro EXHAUST_FAN_AUTO]
description: Set the chamber target temperature to the default
gcode:
    {% set FAN_TEMP = printer['gcode_macro _USER_VARIABLE'].exhaust_fan_min_temp %}
    SET_TEMPERATURE_FAN_TARGET temperature_fan="exhaust_fan" target={FAN_TEMP}